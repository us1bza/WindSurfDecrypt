# TunSurfDecrypt

```
╔══════════════════════════════════════════════════════════════════════════════╗
║  ████████╗██╗   ██╗███╗   ██╗███████╗██╗   ██╗██████╗ ███████╗            ║
║  ╚══██╔══╝██║   ██║████╗  ██║██╔════╝██║   ██║██╔══██╗██╔════╝            ║
║     ██║   ██║   ██║██╔██╗ ██║███████╗██║   ██║██████╔╝█████╗              ║
║     ██║   ██║   ██║██║╚██╗██║╚════██║██║   ██║██╔══██╗██╔══╝              ║
║     ██║   ╚██████╔╝██║ ╚████║███████║╚██████╔╝██║  ██║██║                 ║
║     ╚═╝    ╚═════╝ ╚═╝  ╚═══╝╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚═╝                 ║
║                                                                              ║
║  ██████╗ ███████╗ ██████╗██████╗ ██╗   ██╗██████╗ ████████╗               ║
║  ██╔══██╗██╔════╝██╔════╝██╔══██╗╚██╗ ██╔╝██╔══██╗╚══██╔══╝               ║
║  ██║  ██║█████╗  ██║     ██████╔╝ ╚████╔╝ ██████╔╝   ██║                  ║
║  ██║  ██║██╔══╝  ██║     ██╔══██╗  ╚██╔╝  ██╔═══╝    ██║                  ║
║  ██████╔╝███████╗╚██████╗██║  ██║   ██║   ██║        ██║                  ║
║  ╚═════╝ ╚══════╝ ╚═════╝╚═╝  ╚═╝   ╚═╝   ╚═╝        ╚═╝                  ║
║                                                                              ║
║  TunSurfDecrypt v1.0                                                        ║
║  US1BZA                                                                     ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

Профессиональный инструмент для мониторинга, расшифровки и анализа сообщений протокола Windsurf в реальном времени с интеграцией API.

## Возможности

- Мониторинг и расшифровка сообщений в реальном времени
- Автоматическая отправка расшифрованных сообщений через API
- Красивый терминальный интерфейс с живыми обновлениями
- Комплексный анализ сообщений:
  - Версия клиента
  - ID сессии
  - Язык
  - Версия
  - ID машины
  - Путь установки
- Отслеживание истории сообщений
- Автоматическое логирование и архивирование сообщений
- Поддержка нескольких форматов ввода:
  - Необработанные двоичные данные
  - Шестнадцатеричные строки (с форматом \x)
  - Мониторинг файлов
- Детальная визуализация шестнадцатеричного дампа
- Экспорт расшифрованных сообщений в JSON
- Интеграция API с поддержкой аутентификации

## Установка

1. Установите необходимые зависимости:
```bash
sudo pacman -S python-rich python-click python-cryptography python-watchdog python-requests
```

Или используя pip:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что у вас установлен Python 3.7+.

## Конфигурация

### Конфигурация API

Настройте конечную точку API для отправки сообщений:

```bash
python windsurf_monitor.py configure-api "https://your-api-endpoint.com" --api-key "your-api-key"
```

Или отредактируйте файл `config.json` напрямую:
```json
{
    "api": {
        "enabled": true,
        "endpoint": "https://your-api-endpoint.com",
        "api_key": "your-api-key",
        "headers": {
            "Content-Type": "application/json",
            "User-Agent": "WindsurfMonitor/1.0"
        }
    }
}
```

## Использование

Инструмент предоставляет два основных режима работы:

### 1. Расшифровка одного сообщения

Расшифровать одно сообщение Windsurf и при необходимости отправить через API:

```bash
python windsurf_monitor.py decrypt "ВАШЕ_СООБЩЕНИЕ" --api-endpoint "https://api.example.com" --api-key "ваш-ключ"
```

Опции:
- `--file`, `-f`: Входные данные - это файл, содержащий сообщение
- `--output-dir`, `-o`: Каталог для сохранения выходных файлов (по умолчанию: logs)
- `--api-endpoint`: Конечная точка API для отправки расшифрованных сообщений
- `--api-key`: Ключ API для аутентификации

Пример:
```bash
python windsurf_monitor.py decrypt "\xC1\x0awindsurf1.30.2..." --api-endpoint "https://api.example.com"
```

### 2. Мониторинг в реальном времени

Отслеживать каталог на наличие новых сообщений Windsurf и автоматически отправлять через API:

```bash
python windsurf_monitor.py monitor --api-endpoint "https://api.example.com" --api-key "ваш-ключ"
```

Опции:
- `--watch-dir`, `-w`: Каталог для отслеживания новых сообщений (по умолчанию: текущий каталог)
- `--output-dir`, `-o`: Каталог для сохранения выходных файлов (по умолчанию: logs)
- `--api-endpoint`: Конечная точка API для отправки расшифрованных сообщений
- `--api-key`: Ключ API для аутентификации

Режим мониторинга предоставляет живой терминальный интерфейс, показывающий:
- Историю последних сообщений
- Статус отправки через API
- Детальный анализ сообщений
- Шестнадцатеричные дампы в реальном времени
- Информацию о состоянии

## Интеграция API

### Формат сообщений

Сообщения отправляются через API в следующем формате JSON:

```json
{
    "timestamp": "2024-03-14T12:34:56.789Z",
    "parsed_data": {
        "client_version": "windsurf1.30.2",
        "session_id": "afe236bf-c932-4618-9705-d052fb01ff1c",
        "language": "ru",
        "version": "11.0.0",
        "machine_id": "5c150d7d-fb60-49a5-ba7b-d0252ae63d59b",
        "installation_path": "C:\\Program Files\\WindsurfEski\\..."
    },
    "hex_dump": "0000: c1 0a 77 69 ...",
    "raw_data": "c10a77696e647375726631..."
}
```

### Аутентификация

Инструмент поддерживает аутентификацию по API-ключу с использованием схемы Bearer token:
```
Authorization: Bearer ваш-api-ключ
```

## Формат вывода

Все расшифрованные сообщения автоматически сохраняются в каталоге вывода:

1. JSON-файлы, содержащие:
   - Временная метка
   - Разобранные данные сообщения
   - Шестнадцатеричный дамп
   - Необработанные данные сообщения

2. Файл журнала (windsurf_decryptor.log) с:
   - Подробными журналами операций
   - Статусом отправки через API
   - Сообщениями об ошибках
   - Предупреждающими сообщениями

## Поддержка форматов сообщений

Инструмент может обрабатывать различные форматы сообщений Windsurf:
- Сообщения с магическим заголовком (\xC1\x0A)
- Различные кодировки символов (UTF-8, Latin-1)
- Несколько форматов полей
- Двоичные и текстовые данные

## Обработка ошибок

Комплексная обработка ошибок для:
- Недопустимых форматов сообщений
- Поврежденных данных
- Проблем с доступом к файлам
- Проблем с кодировкой
- Сетевых прерываний
- Сбоев подключения к API

## Участие в разработке

Вы можете внести свой вклад в этот проект:
1. Сообщая об ошибках
2. Предлагая новые функции
3. Отправляя запросы на включение изменений

## Лицензия

Этот инструмент предоставляется только в образовательных целях. Используйте ответственно и в соответствии с применимыми законами и правилами. 